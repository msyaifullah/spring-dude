# ============================================================================
# Local Development Configuration with Auto-Reload
# ============================================================================
# Run with: mvn spring-boot:run -pl venus -Dspring-boot.run.profiles=local
# Or use: ./dev.sh
# ============================================================================

# Server configuration
server.port=8080

# ============================================================================
# DevTools - Auto Reload Configuration
# ============================================================================
# Enable DevTools (auto-restart on code changes)
spring.devtools.restart.enabled=true

# Trigger file - touch this file to force restart
spring.devtools.restart.trigger-file=.reloadtrigger

# Additional paths to watch for changes
spring.devtools.restart.additional-paths=src/main/java,src/main/resources

# Exclude paths from restart trigger (static resources, etc.)
spring.devtools.restart.exclude=static/**,public/**,templates/**,META-INF/maven/**

# LiveReload server (browser auto-refresh)
spring.devtools.livereload.enabled=true
spring.devtools.livereload.port=35729

# Faster restart by using a custom classloader
spring.devtools.restart.poll-interval=1s
spring.devtools.restart.quiet-period=400ms

# ============================================================================
# Logging - More verbose for development
# ============================================================================
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.com.zaxxer.hikari=INFO
logging.level.com.yyggee=DEBUG
logging.level.lib.yyggee=DEBUG

# Colorful console output
spring.output.ansi.enabled=always

# ============================================================================
# Database - Local MySQL (using H2 for simplicity, or configure MySQL below)
# ============================================================================
# Option 1: Use H2 in-memory database for quick local development
spring.datasource.url=jdbc:h2:mem:devdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Option 2: Use local MySQL (uncomment below and comment H2 above)
# ds1.spring.datasource.url=jdbc:mysql://localhost:3306/drivenMock?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
# ds1.spring.datasource.username=root
# ds1.spring.datasource.password=root
# ds2.spring.datasource.url=jdbc:mysql://localhost:3306/drivenPayoptOne?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
# ds2.spring.datasource.username=root
# ds2.spring.datasource.password=root
# ds3.spring.datasource.url=jdbc:mysql://localhost:3306/drivenPayoptTwo?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
# ds3.spring.datasource.username=root
# ds3.spring.datasource.password=root
# spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
# spring.jpa.hibernate.ddl-auto=update

# ============================================================================
# Redis - Local or disable for development
# ============================================================================
# Option 1: Disable Redis for local development
spring.data.redis.repositories.enabled=false
# spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration

# Option 2: Use local Redis (uncomment below)
# spring.data.redis.host=localhost
# spring.data.redis.port=6379
# spring.data.redis.ssl.enabled=false

# ============================================================================
# Security - Relaxed for development
# ============================================================================
security.jwt.token.secret-key=local-dev-secret-key-change-in-production
security.jwt.token.expire-length=86400000
security.jwt.token.refresh-expire-length=30

# ============================================================================
# Other Development Settings
# ============================================================================
# Show error details
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=always
server.error.include-exception=true

# Disable template caching
spring.thymeleaf.cache=false
spring.freemarker.cache=false

# Library test property
lib.yyggee.host=http://localhost:8080
